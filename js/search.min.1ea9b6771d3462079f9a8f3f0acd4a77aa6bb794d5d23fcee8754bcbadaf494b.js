(function(){const h='/knowledge-base/js/search-data.min.2610bea0efb51059821a4862e8e07ea9c7ab632c488cb8380bdc07e1ab3f8b16.json',a=document.querySelector('#search-input'),c=document.querySelector('#search-results');if(!a)return;a.addEventListener('focus',e),a.addEventListener('keyup',d),document.addEventListener('keypress',f);function f(b){if(a===document.activeElement)return;const c=String.fromCharCode(b.charCode);if(!g(c))return;a.focus(),b.preventDefault()}function g(b){const c=a.getAttribute('data-hotkeys')||'';return c.indexOf(b)>=0}function e(){a.removeEventListener('focus',e),a.required=!0,fetch(h).then(a=>a.json()).then(a=>{window.bookSearchIndex=new FlexSearch.Document({tokenize:"forward",document:{id:"id",store:["title","href","tags","preview"],index:["title","tags","content"]}}),a.forEach(a=>{window.bookSearchIndex.add(a)})}).then(()=>a.required=!1).then(d)}function d(){while(c.firstChild)c.removeChild(c.firstChild);if(!a.value)return;let d=window.bookSearchIndex.search(a.value,{limit:10,enrich:!0});const b=new Map;d.forEach(a=>{a.result.forEach(a=>{b.set(a.id,a.doc)})}),b.forEach(a=>{c.appendChild(i(a))})}function i(c){const g=b('<li></li>'),d=b('<a></a>'),a=b('<div></div>'),e=b('<span></span>'),f=b('<span></span>');return d.href=c.href,e.textContent=c.title,f.textContent=c.preview,a.classList.add('item-preview'),e.classList.add('item-preview-title'),f.classList.add('item-preview-content'),a.appendChild(e),a.appendChild(b('<br>')),a.appendChild(f),d.appendChild(a),g.appendChild(d),g}function b(b){const a=document.createElement('div');return a.innerHTML=b,a.firstChild}})()