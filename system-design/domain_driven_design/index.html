<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Referred in
 Microservices   See raw in Lightbend Academy
Useful for modelling use-cases before attempting to implement it whether in Software or mere Diagrams.
Subject-Verb-Object notation #  Allows having a consistent way to phrase activies our events in the domain.
Example: Host checks current reservation.
 Subject: Host Verb: Checks Object: Reservation  Note that &ldquo;current&rdquo; can be seen as a modifier.
Sometimes there may be multiple objects."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Domain Driven Design"><meta property="og:description" content="Referred in
 Microservices   See raw in Lightbend Academy
Useful for modelling use-cases before attempting to implement it whether in Software or mere Diagrams.
Subject-Verb-Object notation #  Allows having a consistent way to phrase activies our events in the domain.
Example: Host checks current reservation.
 Subject: Host Verb: Checks Object: Reservation  Note that &ldquo;current&rdquo; can be seen as a modifier.
Sometimes there may be multiple objects."><meta property="og:type" content="article"><meta property="og:url" content="https://bphenriques.github.io/knowledge-base/system-design/domain_driven_design/"><title>Domain Driven Design | Bruno Henriques</title><link rel=manifest href=/knowledge-base/manifest.json><link rel=icon href=/knowledge-base/favicon.png type=image/x-icon><link rel=stylesheet href=/knowledge-base/book.min.1251f5eefcf487ae0df4b5a44283e1e26687a9e19d3af75df0afe44c4689ad10.css integrity="sha256-ElH17vz0h64N9LWkQoPh4maHqeGdOvdd8K/kTEaJrRA="><script defer src=/knowledge-base/en.search.min.163d212a2e7a4b40def98affc0297bb268462ed12811a589e5206bd753032c1f.js integrity="sha256-Fj0hKi56S0De+Yr/wCl7smhGLtEoEaWJ5SBr11MDLB8="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/knowledge-base><span>Bruno Henriques</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Concurrency</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/concurrency/actor-model/>Actor Model</a></li></ul></li><li class=book-section-flat><span>Data Processing</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/data-processing/apache-spark/>Apache Spark</a></li><li><a href=https://bphenriques.github.io/knowledge-base/data-processing/states-of-data/>States of Data</a></li></ul></li><li class=book-section-flat><span>Databases</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/databases/overview/>Overview</a></li></ul></li><li class=book-section-flat><span>Documentation</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/documentation/readme/>Readme</a></li></ul></li><li class=book-section-flat><span>Editors</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/editors/emacs/>Emacs</a></li></ul></li><li class=book-section-flat><span>Learning</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/learning/coursera/>Coursera</a></li><li><a href=https://bphenriques.github.io/knowledge-base/learning/hands_on_scala_programming/>Hands-on Scala Programming</a></li><li><a href=https://bphenriques.github.io/knowledge-base/learning/technical_writing/>Technical Writing</a></li></ul></li><li class=book-section-flat><span>Messaging Systems</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/messaging-systems/messaging-systems-overview/>Messaging Systems Comparison</a></li></ul></li><li class=book-section-flat><span>Monitoring</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/monitoring/bug-management/>Bug Management</a></li></ul></li><li class=book-section-flat><span>Security</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/security/jwt/>JWT</a></li></ul></li><li class=book-section-flat><span>System Design</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/system-design/command_query_responsibility_segregation/>Command Query Responsibility Segregation (CQRS)</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/command_sourcing/>Command Sourcing</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/consistency_and_availability/>Consistency And Availability</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/cqrs_es/>CQRS/ES</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/domain_driven_design/ class=active>Domain Driven Design</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/event_sourcing/>Event Sourcing</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/message_driven_architecture/>Message Driven Architecture</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/microservices/>Microservices</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/monolith/>Monolith</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/reactive_systems/>Reactive Systems</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/service_oriented_architecture/>Service Oriented Architecture</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/articles/>System Design Articles</a></li></ul></li><li class=book-section-flat><span>Work</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/work/curriculum/>Curriculum</a></li><li><a href=https://bphenriques.github.io/knowledge-base/work/random-memories/>Random Memories</a></li><li><a href=https://bphenriques.github.io/knowledge-base/work/way-of-work/>Way of work</a></li></ul></li><li class=book-section-flat><span>Snippets</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/snippets/emacs/>Emacs</a></li><li><a href=https://bphenriques.github.io/knowledge-base/snippets/jackson/>Jackson</a></li></ul></li><li class=book-section-flat><span>Blog Ideas</span><ul></ul></li><li class=book-section-flat><span>Uncategorized</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/akka/>Akka</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/dotfiles/>dotfiles</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/event_sourcing/>Event Sourcing</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/lightbend-academy/>Lightbend Academy</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__/>Linux Tips</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/nix/>Nix</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/nota_aleatoria/>nota aleatoria</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/org_protocol/>Org-Protocol</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/relevant-xkcds/>Relevant xkcds</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/sobre_qq_coisa/>Sobre qq coisa</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__ssh_agent_explained/>SSH Agent</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-stack-enties/>Stack Web Notes</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__1x_engineer/>Web Note - 1x Engineer</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__degoogle_a_huge_list_of_alternatives_to_google_products_privacy_tips_tricks_and_links/>Web Note - degoogle | A huge list of alternatives to Google products. Privacy tips, tricks, and links.</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__remembering_what_you_read_zettelkasten_vs_p_a_r_a/>Web Note - Remembering what you Read: Zettelkasten vs P.A.R.A.</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__stop_taking_regular_notes_use_a_zettelkasten_instead_hacker_news/>Web Note - Stop Taking Regular Notes; Use a Zettelkasten Instead | Hacker News</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__the_product_minded_software_engineer_the_pragmatic_engineer/>Web Note - The Product-Minded Software Engineer - The Pragmatic Engineer</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__tools_for_better_thinking_untools/>Web Note - Tools for better thinking | Untools</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__what_is_nix_shopify_engineering/>Web Note - What Is Nix – Shopify Engineering</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-note__write_code_that_is_easy_to_delete_not_easy_to_programming_is_terrible/>Web Note - Write code that is easy to delete, not easy to… — programming is terrible</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/knowledge-base/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Domain Driven Design</strong>
<label for=toc-control><img src=/knowledge-base/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#subject-verb-object-notation>Subject-Verb-Object notation</a></li><li><a href=#bounded-context>Bounded Context</a></li><li><a href=#anti-corruption-layer>Anti-Corruption Layer</a><ul><li><a href=#simpler-diagram--if-plantuml-is-able-to-generate-one-and-i-understand-how-dot-dot><span class="org-todo todo TODO">TODO</span> Simpler diagram (if plantuml is able to generate one and I understand how..)</a></li></ul></li><li><a href=#context-map>Context Map</a></li><li><a href=#discovery-process-using-event-storming><span class="org-todo todo TODO">TODO</span> Discovery Process using Event Storming</a></li><li><a href=#types-of-domain-activities>Types of Domain Activities</a></li><li><a href=#domain-objects>Domain Objects</a></li><li><a href=#domain-abstractiosn>Domain Abstractiosn</a><ul><li><a href=#services>Services</a></li><li><a href=#factories>Factories</a></li><li><a href=#repositories>Repositories</a></li></ul></li><li><a href=#hexagonal-architecutre>Hexagonal Architecutre</a></li></ul></nav></aside></header><article class=markdown><div class=backlinks><div></div><p>Referred in</p><ul><li><a href=/knowledge-base/system-design/microservices/>Microservices</a></li></ul></div><p>See raw in <a href=/knowledge-base/uncategorized/lightbend-academy/>Lightbend Academy</a></p><p>Useful for modelling use-cases before attempting to implement it whether in Software or mere Diagrams.</p><h2 id=subject-verb-object-notation>Subject-Verb-Object notation
<a class=anchor href=#subject-verb-object-notation>#</a></h2><p>Allows having a consistent way to phrase activies our events in the domain.</p><p>Example: Host checks current reservation.</p><ul><li><strong>Subject</strong>: Host</li><li><strong>Verb</strong>: Checks</li><li><strong>Object</strong>: Reservation</li></ul><p>Note that &ldquo;current&rdquo; can be seen as a modifier.</p><p>Sometimes there may be multiple objects. E.g., &ldquo;Bartender collects Payment for a Drink Order&rdquo;:</p><ul><li>Both are objects</li><li>&ldquo;Payment&rdquo; is a direct object.</li><li>&ldquo;Drink Order&rdquo; is a indirect object.</li></ul><p>Regardless, diferentiation is not that relevant.</p><h2 id=bounded-context>Bounded Context
<a class=anchor href=#bounded-context>#</a></h2><p>Each one have unique domain concepts and not all contexts are compatible with others.</p><h2 id=anti-corruption-layer>Anti-Corruption Layer
<a class=anchor href=#anti-corruption-layer>#</a></h2><p>Solves issues where coupling starts. This layer leaves right next to the bounded context to avoid leaking info from/to that bounded context.</p><p>Typical example: Let&rsquo;s put everything in the same bag.</p><p>What happens is that we have a layer responsible for translating similar concepts from one bounded context to another.</p><p>How to implement: Abstract interface as it represents the contract in its purest way without compromising - Sometimes abstractions are too much indirection but do understand. :shrug:</p><pre><code class=language-plantuml data-lang=plantuml>actor User
control &quot;Anti Corruption Layer&quot; as ACL
entity Component

User -&gt; ACL: Process X
ACL -&gt; ACL: Translate concept X to Y
ACL -&gt; Component: Process Y
Component --&gt; ACL: Z
ACL --&gt; User: Z
</code></pre><p>This is also useful for legacy systems. In this case a Anti Corruption Layer would be preferable on either end.</p><h3 id=simpler-diagram--if-plantuml-is-able-to-generate-one-and-i-understand-how-dot-dot><span class="org-todo todo TODO">TODO</span> Simpler diagram (if plantuml is able to generate one and I understand how..)
<a class=anchor href=#simpler-diagram--if-plantuml-is-able-to-generate-one-and-i-understand-how-dot-dot>#</a></h3><h2 id=context-map>Context Map
<a class=anchor href=#context-map>#</a></h2><p>Are a way of of visualizating Bounded contexts and the relationships between them.</p><pre><code class=language-plantuml data-lang=plantuml>[Bounded Context A] -&gt; [Bounded Context B]
[Bounded Context A] -&gt; [Bounded Context C]
[Bounded Context B] -&gt; [Bounded Context C]
[Bounded Context C] -&gt; [Bounded Context D]
</code></pre><ul><li>Arrows represent dependencies.</li><li>Lines may be labelled to indicate the nature of the relationship.</li></ul><h2 id=discovery-process-using-event-storming><span class="org-todo todo TODO">TODO</span> Discovery Process using Event Storming
<a class=anchor href=#discovery-process-using-event-storming>#</a></h2><h2 id=types-of-domain-activities>Types of Domain Activities
<a class=anchor href=#types-of-domain-activities>#</a></h2><ul><li><strong>Command</strong>: A request yet to happen and can be rejected. Usually delivered to a specific destination and changes the state of the domain.</li><li><strong>Events</strong>: Action that happened in the past. Hence they can not be rejected. Often broadcast to many destinations. Record a change to the state of the domain, often the result of a command (what are the alternatives?).</li><li><strong>Query</strong>: Requestfor information about the domain. Usually delievered to a specific destination. Do not change the state of the domain.</li></ul><p>All of these represent the types of messages in a Reactive System and form the API for a Bounded Context.</p><h2 id=domain-objects>Domain Objects
<a class=anchor href=#domain-objects>#</a></h2><ul><li><strong>Value objects</strong>: Defined by its attribute. Immuatable. Messages in Reactive Systems are implemented as Value Objects.</li><li><strong>Entity</strong>: Defined by an unique identity. The fields may change but not its identitity. Are the soruce of truth - Actors in Akka or Entitities in Lagom (hopefully will <em>click</em> later)</li></ul><p><a href=/knowledge-base/system-design/monolith/>Monolith</a>- <strong>Aggregate</strong>: Collection of domain objects bound to a root entity:</p><ul><li>Example: Person (Aggregate Root), Name (Aggregate), Address (Aggregate).</li><li>Transactions should not span multiple aggregate roots.</li><li>The Aggregate Root may change between bounded contexts. Aggregate Root == Root Entity.</li><li>Good cadnidates for distribution in Reactive Systems.</li><li>Question: How to determine?<ul><li>Is the entity involved in more operations in the same bounded context?</li><li>Does it make sense deleting other entities when this one is deleted?</li><li>Will a single transaction span multiple entities?</li></ul></li></ul><h2 id=domain-abstractiosn>Domain Abstractiosn
<a class=anchor href=#domain-abstractiosn>#</a></h2><h3 id=services>Services
<a class=anchor href=#services>#</a></h3><p>Busines Logic encapsulated. Should be stateless otherwise they become an entity or a value object.</p><p>Should be fairly thin.</p><h3 id=factories>Factories
<a class=anchor href=#factories>#</a></h3><p>Constructing domain object may not be trivial as they may have to access external resources (DBs, files, REst APIs, etc).</p><h3 id=repositories>Repositories
<a class=anchor href=#repositories>#</a></h3><p>Similar to factories but used to get or modify existing objects. They work often over databases but can work with files or Rest Apis (I actually prefer &ldquo;Gateways&rdquo; for Rest APIs).</p><p>Note: Factories and Repositories can be the same in practice.</p><h2 id=hexagonal-architecutre>Hexagonal Architecutre
<a class=anchor href=#hexagonal-architecutre>#</a></h2><p>Is not directly related with domain driven design but is very compatible.</p><p>Domain is at the core and is at teh center becoming the architectural focus. Then there are ports to communicate with the domain exposed as API for the domain. INfrastructure contains adapters that map to the ports.</p><p>Like an Onion</p><ul><li>Domain<ul><li>API - The ports
Infrastructure - Adapts incoming and outgoing traffic in to the ports.</li></ul></li></ul><p>Outer layers depends on inner layers. And inner layers have no knowledge of other layers.</p><p>:thinking: This does not seem different from the typical layered design with DB -> Services -> API</p><p>Ensures proper spearation of infrastructure from domain.</p><p>These layers may be modelled through packages or projects. Details are not important. The important thing is to make the domain portable.</p><p>Would like a concrete example on how it really differents from the N tiered design.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><div><a class="flex align-center" href=https://github.com/bphenriques/knowledge-base/edit/master/org/system-design/domain_driven_design.org target=_blank rel=noopener><img src=/knowledge-base/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#subject-verb-object-notation>Subject-Verb-Object notation</a></li><li><a href=#bounded-context>Bounded Context</a></li><li><a href=#anti-corruption-layer>Anti-Corruption Layer</a><ul><li><a href=#simpler-diagram--if-plantuml-is-able-to-generate-one-and-i-understand-how-dot-dot><span class="org-todo todo TODO">TODO</span> Simpler diagram (if plantuml is able to generate one and I understand how..)</a></li></ul></li><li><a href=#context-map>Context Map</a></li><li><a href=#discovery-process-using-event-storming><span class="org-todo todo TODO">TODO</span> Discovery Process using Event Storming</a></li><li><a href=#types-of-domain-activities>Types of Domain Activities</a></li><li><a href=#domain-objects>Domain Objects</a></li><li><a href=#domain-abstractiosn>Domain Abstractiosn</a><ul><li><a href=#services>Services</a></li><li><a href=#factories>Factories</a></li><li><a href=#repositories>Repositories</a></li></ul></li><li><a href=#hexagonal-architecutre>Hexagonal Architecutre</a></li></ul></nav></aside></main></body></html>