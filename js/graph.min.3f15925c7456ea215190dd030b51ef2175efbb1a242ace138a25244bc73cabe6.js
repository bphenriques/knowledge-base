(function(){const g=10,r=40,q=100,o=50,i=[.2,3],h='/knowledge-base/js/graph-data.min.9402d547ca298243e076ac178ccd5d79fc11cf255d92a992c6ea8325b11df6d6.json',a=document.getElementById('graph-wrapper');let c=-1,b={};a&&j();function j(){fetch(h).then(a=>a.json()).then(a=>{let b=a.nodes,c=a.edges;k(b,c)})}function k(h,j){const o=document.createElementNS("http://www.w3.org/2000/svg","svg");a.appendChild(o),h.forEach(a=>{p(a.path)&&(c=a.id),b[a.id]=s(a)});const e=a.clientWidth,f=a.clientHeight,g=d3.select("svg"),d=g.append("g").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${e} ${f}`),q=d.append("g").attr("class","links").selectAll(".links"),r=d.append("g").attr("class","nodes").selectAll(".nodes"),t=d.append("g").attr("class","labels").selectAll(".labels"),u=d3.forceSimulation(h).force("charge",d3.forceManyBody().strength(-4e3)).force("link",d3.forceLink(j).id(a=>a.id)).force("center",d3.forceCenter(e/2,f/2)).force("forceX",d3.forceX().x(e/2)).force("forceY",d3.forceY().y(f/2)).force("collision",d3.forceCollide().radius(80)),k=d3.zoom().scaleExtent(i).on("zoom",function(a){n(a.transform,d)});g.call(k),m(h,j,u,r,q,t),l(k,g)}function l(b,a){let c=Number(a.attr("width")),d=Number(a.attr("height"));a.call(b.transform,d3.zoomIdentity.translate(c/2,d/2).scale(.6))}function m(m,l,n,i,j,k){i.exit().remove(),j.exit().remove(),k.exit().remove();let a=i.data(m,a=>a.id).enter().append("circle").attr("r",a=>b[a.id]).attr("active",a=>a.id==c||null).merge(i),h=j.data(l,a=>`${a.source.id}-${a.target.id}`).enter().append("line").merge(j),g=k.data(m,a=>a.label).enter().append("text").text(a=>t(a.label.replace(/_*/g,""),o)).attr("active",a=>a.id==c||null).merge(k);a.on("click",f).on("mouseover",function(c,b){e(b,l,a,h,g)}).on("mouseout",function(b){d(a,h,g)}),g.on("click",f).on("mouseover",function(c,b){e(b,l,a,h,g)}).on("mouseout",function(b){d(a,h,g)}),d3.range(q).forEach(n.tick),a.attr("cx",a=>a.x).attr("cy",a=>a.y),g.attr("x",a=>a.x).attr("y",a=>a.y-b[a.id]-10),h.attr("x1",a=>a.source.x).attr("y1",a=>a.source.y).attr("x2",a=>a.target.x).attr("y2",a=>a.target.y)}function n(a,b){b.attr("transform",a)}function f(b,a){window.location=a.path}function p(a){return window.location.pathname.includes(a)}function e(a,d,e,f,g){const b=new Set;d.filter(b=>b.target.id==a.id||b.source.id==a.id).forEach(a=>{b.add(a.target.id),b.add(a.source.id)});const c=c=>c.id!==a.id&&!b.has(c.id)?"unfocus":"";e.attr("class",c),g.attr("class",c),f.attr("class",b=>b.source.id!=a.id&&b.target.id!=a.id?"unfocus":"")}function d(a,b,c){a.attr("class",""),b.attr("class",""),c.attr("class","")}function s(a){let b=10*Math.sqrt(a.number_neighbours+1);return Math.min(Math.max(b,g),r)}function t(a,b,c=' '){return a.length<=b?a:a.substr(0,a.lastIndexOf(c,b))+'...'}})()