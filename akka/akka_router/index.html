<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Intro #  Context: Paralellize work by creating additional actors in order to solve bottlenecks.
Router routes messages to destination actors called routees that can process messages in paralell to improve throughput. The way routing is done may be configured to fit the use-case.
Routing Strategies #  Determines how router routes to its routees.
 RandomRoutingLogic: Pure random and fast. May be unbalanced. RoundRobinRoutingLogic: Take turns. Is more fair and distributed."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Akka Router"><meta property="og:description" content="Intro #  Context: Paralellize work by creating additional actors in order to solve bottlenecks.
Router routes messages to destination actors called routees that can process messages in paralell to improve throughput. The way routing is done may be configured to fit the use-case.
Routing Strategies #  Determines how router routes to its routees.
 RandomRoutingLogic: Pure random and fast. May be unbalanced. RoundRobinRoutingLogic: Take turns. Is more fair and distributed."><meta property="og:type" content="article"><meta property="og:url" content="https://bphenriques.github.io/knowledge-base/akka/akka_router/"><title>Akka Router | Bruno Henriques</title><link rel=manifest href=https://bphenriques.github.io/knowledge-base/manifest.json><link rel=icon href=https://bphenriques.github.io/knowledge-base/favicon.png type=image/x-icon><link rel=stylesheet href=https://bphenriques.github.io/knowledge-base/book.min.c8d3866fece0f65580e9d9c5e7411c48781c968eb10c1b128e0521e3a9b441b2.css integrity="sha256-yNOGb+zg9lWA6dnF50EcSHgclo6xDBsSjgUh46m0QbI="><script defer src=https://bphenriques.github.io/knowledge-base/en.search.min.420847ddaa0fff238ad836eff9863852e708284d384e1fdedf41c41a4fb67918.js integrity="sha256-QghH3aoP/yOK2Dbv+YY4UucIKE04Th/e30HEGk+2eRg="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://bphenriques.github.io/knowledge-base/><span>Bruno Henriques</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Akka</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/akka/akka_cluster/>Akka Cluster</a></li><li><a href=https://bphenriques.github.io/knowledge-base/akka/akka_dispatcher/>Akka Dispatcher</a></li><li><a href=https://bphenriques.github.io/knowledge-base/akka/akka_router/ class=active>Akka Router</a></li><li><a href=https://bphenriques.github.io/knowledge-base/akka/akka_sharding/>Akka Sharding</a></li><li><a href=https://bphenriques.github.io/knowledge-base/akka/akka_streams/>Akka Streams</a></li><li><a href=https://bphenriques.github.io/knowledge-base/akka/akka_testing/>Akka Testing</a></li></ul></li><li class=book-section-flat><span>Concurrency</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/concurrency/actor-model/>Actor Model</a></li><li><a href=https://bphenriques.github.io/knowledge-base/concurrency/amdah_s_law/>Amdah's Law</a></li><li><a href=https://bphenriques.github.io/knowledge-base/concurrency/gunther_s_universal_scalability_law/>Gunther's Universal Scalability Law</a></li></ul></li><li class=book-section-flat><span>Data Processing</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/data-processing/states-of-data/>States of Data</a></li></ul></li><li class=book-section-flat><span>Databases</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/databases/databases_overview/>Databases Overview</a></li><li><a href=https://bphenriques.github.io/knowledge-base/databases/databases_sharding-or-partitioning/>Sharding or Partitioning</a></li></ul></li><li class=book-section-flat><span>Documentation</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/documentation/readme/>Readme</a></li></ul></li><li class=book-section-flat><span>Editors</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/editors/emacs/>Emacs</a></li></ul></li><li class=book-section-flat><span>Learning</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/learning/coursera/>Coursera</a></li><li><a href=https://bphenriques.github.io/knowledge-base/learning/hands_on_scala_programming/>Hands-on Scala Programming</a></li><li><a href=https://bphenriques.github.io/knowledge-base/learning/technical_writing/>Technical Writing</a></li></ul></li><li class=book-section-flat><span>Messaging Systems</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/messaging-systems/messaging-systems-overview/>Messaging Systems Comparison</a></li></ul></li><li class=book-section-flat><span>Monitoring</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/monitoring/bug-management/>Bug Management</a></li></ul></li><li class=book-section-flat><span>Protocols</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/protocols/gossip_protocol/>Gossip Protocol</a></li><li><a href=https://bphenriques.github.io/knowledge-base/protocols/heartbeat/>Heartbeat</a></li></ul></li><li class=book-section-flat><span>Resources</span><ul></ul></li><li class=book-section-flat><span>Security</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/security/jwt/>JWT</a></li></ul></li><li class=book-section-flat><span>System Design</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/system-design/command_query_responsibility_segregation/>Command Query Responsibility Segregation (CQRS)</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/command_sourcing/>Command Sourcing</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/consistency_and_availability/>Consistency And Availability</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/domain_driven_design/>Domain Driven Design</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/event_sourcing/>Event Sourcing</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/message_driven_architecture/>Message Driven Architecture</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/microservices/>Microservices</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/monolith/>Monolith</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/reactive_systems/>Reactive Systems</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/service_oriented_architecture_soa/>Service Oriented Architecture (SOA)</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/system-design_sli-slo/>SLI/SLO</a></li><li><a href=https://bphenriques.github.io/knowledge-base/system-design/system-design_stateless/>Stateless</a></li></ul></li><li class=book-section-flat><span>Work</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/work/curriculum/>Curriculum</a></li><li><a href=https://bphenriques.github.io/knowledge-base/work/random-memories/>Random Memories</a></li><li><a href=https://bphenriques.github.io/knowledge-base/work/thinking_tools/>Thinking Tools</a></li><li><a href=https://bphenriques.github.io/knowledge-base/work/way-of-work/>Way of work</a></li></ul></li><li class=book-section-flat><span>Snippets</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/snippets/emacs/>Emacs</a></li><li><a href=https://bphenriques.github.io/knowledge-base/snippets/jackson/>Jackson</a></li></ul></li><li class=book-section-flat><span>Blog Ideas</span><ul></ul></li><li class=book-section-flat><span>Uncategorized</span><ul><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/akka/>Akka</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/dotfiles/>dotfiles</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/gpg/>gpg</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/nix/>Nix</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/relevant-xkcds/>Relevant xkcds</a></li><li><a href=https://bphenriques.github.io/knowledge-base/uncategorized/web-stack-enties/>Stack Web Notes</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://bphenriques.github.io/knowledge-base/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Akka Router</strong>
<label for=toc-control><img src=https://bphenriques.github.io/knowledge-base/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#routing-strategies>Routing Strategies</a></li><li><a href=#types-of-router>Types of Router</a></li><li><a href=#pool-router><code>Pool Router</code></a></li><li><a href=#group-router><code>Group Router</code></a></li><li><a href=#special-messages>Special Messages</a></li></ul></nav></aside></header><article class=markdown><h2 id=intro>Intro
<a class=anchor href=#intro>#</a></h2><p>Context: Paralellize work by creating additional actors in order to solve bottlenecks.</p><p>Router routes messages to destination actors called routees that can process messages in paralell to improve throughput. The way routing is done may be configured to fit the use-case.</p><h2 id=routing-strategies>Routing Strategies
<a class=anchor href=#routing-strategies>#</a></h2><p>Determines how router routes to its routees.</p><ul><li><code>RandomRoutingLogic</code>: Pure random and fast. May be unbalanced.</li><li><code>RoundRobinRoutingLogic</code>: Take turns. Is more fair and distributed. But depending on the messages, some actors may have more work than others.</li><li><code>SmallestMailboxRoutingLogic</code>: Tracks the size of the mailbox.</li><li><code>ConsistentHashingRoutingLogic</code>: Messages go to a especific routee.</li><li><code>BroadcastRoutingLogic</code>: Sends to all routees.</li><li><code>ScatterGatherFirstCompletedRoutingLogic</code>: Similar to broadcast but looks for the first response. This optimizes speed as the picks the first one.</li><li><code>TailChoppingRoutingLogic</code>: Similar to previous but delays a bit before sending to the next routee.</li></ul><h2 id=types-of-router>Types of Router
<a class=anchor href=#types-of-router>#</a></h2><p>How the routees are managed. In this case, the message delivery is optimized:</p><ul><li>Messages are not enqueued into the router&rsquo;s mailbox but are delivered directly to the routees.</li><li>but delive</li></ul><h2 id=pool-router><code>Pool Router</code>
<a class=anchor href=#pool-router>#</a></h2><p>Creates and supervises a number of routees according to a configuration. E.g., create 5 routees. It can be configured to dynamically adjust the number of routees.</p><figure><img src=https://bphenriques.github.io/knowledge-base/home/runner/work/knowledge-base/knowledge-base/org/akka/_20210105_221731screenshot.png></figure><h2 id=group-router><code>Group Router</code>
<a class=anchor href=#group-router>#</a></h2><figure><img src=https://bphenriques.github.io/knowledge-base/home/runner/work/knowledge-base/knowledge-base/org/akka/_20210105_221755screenshot.png></figure><p>Router is configured to route to existing actors (routees). Each actor is supervised by the parents and not by the router as opposed to previous type. In this case we need to especify the routees and will find all that match.</p><h2 id=special-messages>Special Messages
<a class=anchor href=#special-messages>#</a></h2><ul><li><code>PoisonPill</code>: Is never send to the routee. In this case, this only kills the router. The outcome of the routees will depend on the type of router. On <code>Pool Router</code> (routees are supervised by the router), they are also go with it. On <code>Group Router</code> the router will kill but the routees will not because are not supervised by it.</li><li><code>Kill</code>: Ditto.</li><li><code>Broadcast</code>: Delivers to all routees regardless of the routing logic. We can use it to stop all routees by wrapping a <code>PoisonPill</code> inside a <code>Broadcast</code> message.</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><div><a class="flex align-center" href=https://github.com/bphenriques/knowledge-base/edit/master/org/akka/akka_router.org target=_blank rel=noopener><img src=https://bphenriques.github.io/knowledge-base/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#routing-strategies>Routing Strategies</a></li><li><a href=#types-of-router>Types of Router</a></li><li><a href=#pool-router><code>Pool Router</code></a></li><li><a href=#group-router><code>Group Router</code></a></li><li><a href=#special-messages>Special Messages</a></li></ul></nav></aside></main></body></html>